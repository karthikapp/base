<div class="container" align="center">
  <br>
	<div class="ui main container" style="width: 100%;height: 100%;">
		<!-- Company name at the top center-->
		<a class="ui grey massive label" *ngFor="let a of acct">{{a.companyname}}</a>	
		<br>
		<br>

		<!--Tabs of Leads and Opportunities-->
		<lsu-tabset type="'tabular'">
			<!--LEADS-->
			<lsu-tab  [headerText]="'Leads'" [active]="'true'">
				<div class="ui inverted segment">
  					<div class="ui inverted accordion">	
 					    <div class ="title" [ngClass]="{'title--active' : lead.isOpen}" (click)="showContent(lead)" *ngFor="let lead of leads">
      						<i class="dropdown icon"></i>
      						{{lead.lead_title}}
      											
      						<div class="content" *ngIf="lead.isOpen">	
								<table class="ui stackable table" >
									<thead>
										<tr>
									      <th>Activity Type</th>
									      <th>Date</th>
									      <th>Remarks</th>
									      <th>Start Time</th>
									      <th>End Time</th>
									      <th>Type</th>
									    </tr>
									</thead>

									<!--Looping through leads to get contact person name and their activities for the company(Used Nested *ngFor Loop)-->
								  	<tbody>
								  		<!--ng-template #cpname>
								  			<div class="ui teal large label"> 
								  			Contact Person Name: {{lead.company_contact_person_name}} 
								  			</div>
								  		</ng-template>

								  		<div class="ui teal large label" *ngIf="lead.company_contact_person_name==''; else cpname;">
								  			 Contact Person Name: None
								  		</div-->

								  		<ng-container *ngFor="let cntct of cp| contactpersons">
									  		<div class="ui teal large label" *ngIf="lead.company_contact_person_id==cntct.contact_person_id;">
									  			 Contact Person Name: {{cntct.contact_person_name}}
									  		</div>
								  		</ng-container>

								  		<div style ="color: black;" *ngIf="lead.activities==undefined">
								  			 &nbsp; Activities: None
								  		</div>
								  		<br>

										<ng-container *ngFor="let activ of lead.activities | contactpersons">
										    <tr *ngIf="activ.activity_type == 'phonecall'">
										      <td>{{activ.activity_type}}</td>
										      <td>{{activ.phonecallDate}}</td>
										      <td>{{activ.phonecallremarks}}</td>
										      <td>{{activ.phonecalltimefrom}}</td>
										      <td>{{activ.phonecalltimeto}}</td>
										      <td>{{activ.phone_call_type}}</td>
										  	</tr>
										  	<tr *ngIf="activ.activity_type == 'onsitevisit'">
										      <td>{{activ.activity_type}}</td>
										      <td>{{activ.visitDate}}</td>
										      <td>{{activ.visitremarks}}</td>
										      <td>{{activ.visittimefrom}}</td>
										      <td>{{activ.visittimeto}}</td>
										      <td></td>
										  	</tr>
									   	</ng-container>
								  	</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
		    </lsu-tab>

		    <!--Opportunities-->
		    <lsu-tab [headerText]="'Opportunities'">
		     	<table class="ui tablet stackable table">
					<thead>
						<tr>
					      <th>Name</th>
					      <th>Status</th>
					      <th class="right aligned">Notes</th>
					    </tr>
					</thead>
				  	<tbody>
					    <tr>
					      <td>John</td>
					      <td>Approved</td>
					      <td class="right aligned">None</td>
					    </tr>
					    <tr>
					      <td>Jamie</td>
					      <td>Approved</td>
					      <td class="right aligned">Requires call</td>
					    </tr>
					    <tr>
					      <td>Jill</td>
					      <td>Denied</td>
					      <td class="right aligned">None</td>
					    </tr>
				  	</tbody>
				</table>
		    </lsu-tab>
		</lsu-tabset>

	</div>
</div>



